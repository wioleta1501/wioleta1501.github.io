<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animacja</title>
</head>
<body>
    <canvas id="myGame" width="800" height="600" style="border:2px solid black;">
        Your browser does not support the HTML canvas tag.</canvas>
        
        <script>
        window.addEventListener("keydown", movePlatform, false);
        let c = document.getElementById("myGame");
        let ctx = c.getContext("2d");
        let rectX = (c.width - 80) / 2;
        let rectY = c.height-25;
        let rectWidth = 80;
        let rectHeight = 20;
        let ballRadius = 10;

        let ballX = rectX + (rectWidth/2);
        let ballY = c.height-35;

        function drawBullet() {
            ballX = rectX + (rectWidth/2);
            clearBullet();
            ctx.beginPath();
            ctx.arc(ballX, ballY, ballRadius,0,2*Math.PI);
            ctx.fillStyle = 'green';
            ctx.fill();
            ctx.closePath();
        }

        function shootBullet() {
            clearBullet();

            ballY -= 20;
            drawBullet();
        }
        let i = 0;
        function fire(){
            while (i<10)
            {
                shootBullet();
                i+=1;
            }
        }

        function clearBullet() {
            ctx.beginPath();
            ctx.arc(ballX, ballY, ballRadius+0.5 ,0, 360);
            ctx.fillStyle = 'white';
            ctx.fill();
            ctx.closePath();
        }

        function drawPlatform() {
            ctx.beginPath();
            ctx.rect(rectX, rectY, rectWidth, rectHeight)
            ctx.fillStyle = 'gray';
            ctx.fill();
            ctx.closePath();
        }

        function movePlatform(e) {
                ctx.clearRect(rectX-1, rectY, rectWidth+2, rectHeight);
                clearBullet();
                switch(e.keyCode) {
                    case 37:
                        // left key pressed
                        if(rectX !=0){
                            rectX -= 10;
                        } else {
                            drawBullet();
                            drawPlatform();

                        }
                        break;
                    case 39:
                        // right key pressed
                        if(rectX != c.width-75){
                            rectX += 10;
                        } else{
                            drawBullet();
                            drawPlatform();

                        }
                        break;
                    case 32:
                        // spacebar 
                        fire(); 
                        break;
                }
                drawBullet();
                drawPlatform();
            }
        drawBullet();
        drawPlatform();
        
        </script> 
        
        </body>
        </html>