<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animacja</title>
</head>
<body>
    <canvas id="myGame" width="800" height="600" style="border:2px solid black;">
        Your browser does not support the HTML canvas tag.</canvas>
        
        <script>
        let c = document.getElementById("myGame");

        window.addEventListener("keydown", movePlatform, false);
        
        let ctx = c.getContext("2d");
        let rectX = (c.width - 80) / 2;
        let rectY = c.height-25;
        let rectWidth = 80;
        let rectHeight = 20;
        let ballRadius = 10;
        let ballX = rectX + (rectWidth/2);
        let ballY = c.height-35;

        let balls = [];

        let shootDelay = 0;

        function refresh(){

            ctx.clearRect(0, 0, 800, 600);
            drawPlatform();
            balls.forEach(element => {
                drawBullets(element[0],element[1]);
                element[1]-=5;
                if(element[1]<0)
                balls.splice(balls.indexOf(element, 0),1);
            })

            shootDelay+=1;
        }
        window.setInterval(refresh,50);
            
        refresh();

        function movePlatform(e) {
            
            switch(e.keyCode) {
                case 37:
                case 65:
                    if(rectX !=0){
                        rectX -= 10;
                    }
                   break;
                case 39:
                case 68:
                    if(rectX != c.width-80){
                        rectX += 10;
                    }
                    break;
                case 32:
                    if(shootDelay*50>500){
                        balls.push([rectX + (rectWidth/2),ballY]);
                        shootDelay=0;
                    }
                    break;
            }
            
        }
        function drawPlatform() {
            ctx.beginPath();
            ctx.rect(rectX, rectY, rectWidth, rectHeight)
            ctx.fillStyle = 'gray';
            ctx.fill();
        }

        function drawBullets(x,y) {
            
            ctx.beginPath();
            ctx.arc(x,y, ballRadius,0,2*Math.PI);
            ctx.fillStyle = 'green';
            ctx.fill();
        }

        function drawEnemies(x,y,col){
            ctx.beginPath();
            ctx.arc(x, y, ballRadius*1.5 ,0,2*Math.PI)
            ctx.fillStyle = col;
            ctx.fill();
        }
        
        </script> 
        
        </body>
        </html>